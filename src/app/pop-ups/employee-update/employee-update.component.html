<div class="modal-wrapper">
  <ion-header>
    <ion-toolbar color="light">
      <ion-title>
        <b>Task Status Update</b>
      </ion-title>
      <!-- <ion-buttons slot="end">
        <ion-button fill="clear" (click)="setOpen(false)">
          <ion-icon name="close-outline" class="icon-medium"></ion-icon>
        </ion-button>
      </ion-buttons> -->
    </ion-toolbar>
  </ion-header>

  <ion-content style="height: calc(100vh - 32vh)">
    <form
      [formGroup]="employeeUpdateForm"
      (ngSubmit)="onSubmit()"
      class="register-form"
    >
      <ion-grid>
        <div formArrayName="weeklyUpdates">
          <div
            *ngFor="let update of weeklyUpdates.controls; let i = index"
            [formGroupName]="i"
          >
            <ion-row>
              <ion-col size="4">
                <ion-item
                  class="custom-item"
                  [class.invalid]="isInvalid('weekRange')"
                  [class.valid]="isValid('weekRange')"
                  lines="none"
                >
                  <ion-label class="label-texts" position="stacked"
                    >Week Range</ion-label
                  >
                  <ion-select
                    formControlName="weekRange"
                    interface="popover"
                    class="label-texts"
                    
                  >
                    <ion-select-option
                      *ngFor="let week of weekOptions"
                      [value]="week"
                    >
                      {{ week }}
                    </ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>

              <ion-col size="4">
                <ion-item
                  class="custom-item"
                  [class.invalid]="isInvalid('status')"
                  [class.valid]="isValid('status')"
                  lines="none"
                >
                  <ion-label class="label-texts" position="stacked"
                    >Task Type</ion-label
                  >
                  <ion-select
                    formControlName="status"
                    interface="popover"
                    class="label-texts"
                    placeholder="Select Type"
                  >
                    
                    <ion-select-option value="Pending"
                      >Summary</ion-select-option
                    >
                    <ion-select-option value="Completed"
                      >Key Accomplishments</ion-select-option
                    >
                    <ion-select-option value="Progress">Upcoming Task</ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>

              <ion-col size="4">
                <ion-item
                  class="custom-item"
                  [class.invalid]="isInvalid('status')"
                  [class.valid]="isValid('status')"
                  lines="none"
                >
                  <ion-label class="label-texts" position="stacked"
                    >Projects</ion-label
                  >
                  <ion-select
                    formControlName="status"
                    interface="popover"
                    class="label-texts"
                     placeholder="Select Project"
                  >
                    <ion-select-option value="Progress"
                      >Customer 360</ion-select-option
                    >
                    <ion-select-option value="Pending"
                      >Spp Canada</ion-select-option
                    >
                    <ion-select-option value="Completed"
                      >Initio</ion-select-option
                    >
                    <ion-select-option value="Blocker">UX</ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="4">
                <ion-item
                  class="custom-item"
                  [class.invalid]="isInvalid('status')"
                  [class.valid]="isValid('status')"
                  lines="none"
                >
                  <ion-label class="label-texts" position="stacked"
                    >Employees</ion-label
                  >
                  <ion-select
                    formControlName="status"
                    interface="popover"
                    class="label-texts"
                    placeholder="Select Employee">
                  >
                    <ion-select-option value="Alice Johnson"
                      >Alice Johnson</ion-select-option
                    >
                    <ion-select-option value="Bob Smith"
                      >Bob Smith</ion-select-option
                    >
                    <ion-select-option value="Charlie Lee"
                      >Charlie Lee</ion-select-option
                    >
                    <ion-select-option value="Diana Cruz"
                      >Diana Cruz</ion-select-option
                    >
                    <ion-select-option value="Ethan Patel"
                      >Ethan Patel</ion-select-option
                    >
                  </ion-select>
                </ion-item>
              </ion-col>

              <ion-col size="4">
                <ion-item
                  class="custom-item"
                  [class.invalid]="isInvalid('status')"
                  [class.valid]="isValid('status')"
                  lines="none"
                >
                  <ion-label class="label-texts" position="stacked"
                    >Status</ion-label
                  >
                  <ion-select
                    formControlName="status"
                    class="label-texts"
                    interface="popover"
                    multiple="true"
                    class="label-texts"
                    placeholder="Select Status">
                  >
                    <ion-select-option value="Progress"
                      >Progress</ion-select-option
                    >
                    <ion-select-option value="Pending"
                      >Pending</ion-select-option
                    >
                    <ion-select-option value="Completed"
                      >Completed</ion-select-option
                    >
                    <ion-select-option value="Blocker"
                      >Blocker</ion-select-option
                    >
                  </ion-select>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-row class="ion-align-items-center">
              <ion-col size="8">
                <ion-item
                  class="custom-item"
                  lines="none"
                  [class.invalid]="isInvalid('Comments')"
                  [class.valid]="isValid('Comments')"
                >
                  <ion-textarea
                    formControlName="Comments"
                    label="Comments"
                    labelPlacement="floating"
                    class="label-texts"
                    placeholder="Enter Comments"
                    rows="3"
                  >
                  </ion-textarea>
                </ion-item>
                @if (isInvalid('Comments')) {
                <ion-text color="danger" class="error-message">
                  <p>Comments is required</p>
                </ion-text>
                }
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="1" class="ion-text-center">
                <ion-icon
                  name="add-outline"
                  color="primary"
                  style="cursor: pointer; font-size: 24px; margin-top: 6px"
                  (click)="addMore()"
                ></ion-icon>
              </ion-col>

              <ion-col size="1" class="ion-text-center" *ngIf="i > 0">
                <ion-icon
                  name="trash-outline"
                  color="danger"
                  style="cursor: pointer; font-size: 24px; margin-top: 6px"
                  (click)="removeUpdate(i)"
                ></ion-icon>
              </ion-col>
            </ion-row>
            <hr style="margin-bottom: 8px;" *ngIf="weeklyUpdates.length > 1" />
          </div>
        </div>
      </ion-grid>
    </form>
  </ion-content>

  <ion-footer>
    <ion-toolbar>
      <ion-buttons slot="end">
        <!-- <ion-button style="background-color: black; color: white;margin-right: 8px;" class="submit" (click)="onSubmit()">Submit</ion-button> -->

        <ion-button class="close" (click)="setOpen(false)">Close</ion-button>
        <ion-button class="save"> Submit All Updates </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-footer>
</div>
