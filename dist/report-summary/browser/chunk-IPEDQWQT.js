import{P as d}from"./chunk-LCAD2BME.js";import{k as c,v as I}from"./chunk-X2ZI6WJC.js";import{J as u,K as f,U as S,_ as o,da as p,ea as s,f as m}from"./chunk-6BICWZAS.js";var T=(()=>{class t{constructor(){this.totalSubject=new m,this.toast$=this.totalSubject.asObservable()}show(e,r){this.totalSubject.next({type:e,text:r})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var i={production:!1,apiUrls:"https://emp-tcb1.onrender.com/"};var l={REGISTRATION_DETAILS:i.apiUrls+"register",PROJect_DETAILS:i.apiUrls+"projects",TEAMS_DETAILS:i.apiUrls+"teamslist",LOGIN_DETAILS:"auth/login",POST_MANAGER_DETAILS:"api/managers",CREATE_ACCOUNT:"Account",CREATE_PROJECT:"projects",CREATE_PERSON:"Person",GET_MANAGRE_DETAILS:"Person/role"};var E=(()=>{class t{constructor(){this.http=s(c),this.userList=[]}loginCheck(e){return this.http.get(l.REGISTRATION_DETAILS)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var j=(()=>{class t{constructor(){this.http=s(c),this.url=i.apiUrls}getData(e){return this.http.get(this.url+e)}postData(e,r){return this.http.post(this.url+e,r)}patchData(e,r){return this.http.put(this.url+e,r)}deleteData(e){return this.http.delete(this.url+e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g={loading:!1,error:null,user:null},B=(()=>{class t extends d{constructor(e,r){super(g),this.auth=e,this.router=r,this.toast=s(T),this.sharedservice=s(j),this.login=this.effect(a=>a.pipe(u(A=>(this.patchState({loading:!0,error:null}),this.sharedservice.postData(l.LOGIN_DETAILS,A).pipe(S({next:n=>{n?(this.patchState({user:n}),localStorage.setItem("user",JSON.stringify(n.data)),localStorage.setItem("token",n.data.acessToken),this.router.navigate(["/home"]),this.toast.show("success","Login successfully!")):this.toast.show("error","Invalid username or password.")},error:()=>{this.toast.show("error","Login failed. Please try again."),this.patchState({error:"Login failed."})}}),f(()=>this.patchState({loading:!1}))))))),this.user$=this.select(a=>a.user),this.clearAll=this.updater(()=>g),this.loading$=this.select(a=>a.loading)}static{this.\u0275fac=function(r){return new(r||t)(p(E),p(I))}}static{this.\u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{T as a,j as b,l as c,E as d,B as e};
