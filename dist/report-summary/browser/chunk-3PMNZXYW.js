import{a as x}from"./chunk-N64FFWOQ.js";import{c as B,d as q,e as K}from"./chunk-OTROWG7S.js";import{A as G,B as M,Ba as ue,C as A,Ca as fe,D as z,E as J,F as L,G as R,I as W,S as $,T as H,X,Y as Q,ba as Y,ca as Z,da as ee,ea as te,fa as ie,ga as oe,ia as ne,ja as re,oa as ae,qa as le,ra as se,sa as me,ta as pe,ua as ce,v as d,w as O,wa as de,x as j,y as V}from"./chunk-N46ENOW6.js";import{f as D,g as T,j as P,k as N}from"./chunk-ETXJNP3A.js";import{Ab as F,Bb as w,La as l,Ma as k,U as S,_ as C,_a as h,ab as p,bb as c,cb as I,db as o,ea as m,eb as i,fb as _,jb as E,kb as u,la as b,lb as v,tb as n,va as g,vb as U,wa as y}from"./chunk-45DPJSY7.js";var he=(()=>{class r{constructor(){this.http=m(N),this.url=B.PROJect_DETAILS}getDates(){return this.http.get(this.url)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ye(r,f){if(r&1&&(o(0,"ion-select-option",35),n(1),i()),r&2){let t=f.$implicit;p("value",t),l(),U(" ",t," ")}}function _e(r,f){r&1&&(o(0,"ion-text",31)(1,"p"),n(2,"Comments is required"),i()())}function Ee(r,f){if(r&1){let t=E();o(0,"ion-col",32)(1,"ion-icon",36),u("click",function(){g(t);let a=v().index,s=v();return y(s.removeUpdate(a))}),i()()}}function xe(r,f){if(r&1){let t=E();o(0,"div",10)(1,"ion-row")(2,"ion-col",11)(3,"ion-item",12)(4,"ion-label",13),n(5,"Week Range"),i(),o(6,"ion-select",14),h(7,ye,2,2,"ion-select-option",15),i()()(),o(8,"ion-col",16)(9,"ion-item",12)(10,"ion-label",13),n(11,"Task Type"),i(),o(12,"ion-select",17)(13,"ion-select-option",18),n(14,"Task"),i(),o(15,"ion-select-option",19),n(16,"Summary"),i(),o(17,"ion-select-option",20),n(18,"Key Accomplishments"),i()()()()(),o(19,"ion-row")(20,"ion-col",16)(21,"ion-item",12)(22,"ion-label",13),n(23,"Projects"),i(),o(24,"ion-select",17)(25,"ion-select-option",18),n(26,"Customer 360"),i(),o(27,"ion-select-option",19),n(28,"Spp Canada"),i(),o(29,"ion-select-option",20),n(30,"Initio"),i(),o(31,"ion-select-option",21),n(32,"UX"),i()()()(),o(33,"ion-col",16)(34,"ion-item",12)(35,"ion-label",13),n(36,"Employees"),i(),o(37,"ion-select",17)(38,"ion-select-option",22),n(39,"Alice Johnson"),i(),o(40,"ion-select-option",23),n(41,"Bob Smith"),i(),o(42,"ion-select-option",24),n(43,"Charlie Lee"),i(),o(44,"ion-select-option",25),n(45,"Diana Cruz"),i(),o(46,"ion-select-option",26),n(47,"Ethan Patel"),i()()()(),o(48,"ion-col",16)(49,"ion-item",12)(50,"ion-label",13),n(51,"Status"),i(),o(52,"ion-select",27)(53,"ion-select-option",18),n(54,"Progress"),i(),o(55,"ion-select-option",19),n(56,"Pending"),i(),o(57,"ion-select-option",20),n(58,"Completed"),i(),o(59,"ion-select-option",21),n(60,"Blocker"),i()()()()(),o(61,"ion-row",28)(62,"ion-col",29)(63,"ion-item",12),_(64,"ion-textarea",30),i(),h(65,_e,3,0,"ion-text",31),i(),o(66,"ion-col",32)(67,"ion-icon",33),u("click",function(){g(t);let a=v();return y(a.addMore())}),i()(),h(68,Ee,2,0,"ion-col",34),i()()}if(r&2){let t=f.index,e=v();p("formGroupName",t),l(3),c("invalid",e.isInvalid("weekRange"))("valid",e.isValid("weekRange")),l(4),p("ngForOf",e.weekOptions),l(2),c("invalid",e.isInvalid("status"))("valid",e.isValid("status")),l(12),c("invalid",e.isInvalid("status"))("valid",e.isValid("status")),l(13),c("invalid",e.isInvalid("status"))("valid",e.isValid("status")),l(15),c("invalid",e.isInvalid("status"))("valid",e.isValid("status")),l(14),c("invalid",e.isInvalid("Comments"))("valid",e.isValid("Comments")),l(2),I(65,e.isInvalid("Comments")?65:-1),l(3),p("ngIf",e.weeklyUpdates.length>1)}}var ze=(()=>{class r{ngOnInit(){this.getProjetcDates(),this.loginStore.user$.pipe(S(t=>{console.log(t),this.userInfo=t},()=>{})).subscribe(),console.log("userList",this.userInfo),this.summary.getDetails(),this.summary.projects$.subscribe(t=>{var e=t.find(a=>a.project_name===this.userInfo.projectName);this.projectInfo=e?.id,console.log("filter",e),console.log(t)})}getProjetcDates(){this.employeeupdate.getDates().subscribe(t=>{this.Dates=t,console.log(this.Dates)})}constructor(t){this.fb=t,this.employeeupdate=m(he),this.Dates=[],this.dateError=null,this.summary=m(x),this.loginStore=m(K),this.loginService=m(q),this.projectInfo="",this.weekValue="WEEK:16-June-2025 To 20-June-2025",this.modalCtrl=m(ue),this.weekOptions=["WEEK:16-June-2025 To 20-June-2025","WEEK:08-June-2025 To 14-June-2025","WEEK:01-June-2025 To 07-June-2025"],this.initializeForm()}initializeForm(){this.employeeUpdateForm=this.fb.group({summary:[""],comments:[""],weeklyUpdates:this.fb.array([this.createWeeklyUpdateGroup()])})}validateDates(){let t=this.employeeUpdateForm.get("startDate")?.value,e=this.employeeUpdateForm.get("endDate")?.value;if(!t||!e)return this.dateError=null,!0;let a=new Date(t),s=new Date(e);return a>s?(this.dateError="Start date cannot be greater than end date",!1):(this.dateError=null,!0)}createWeeklyUpdateGroup(){let t=this.fb.group({startDate:["",[d.required]],endDate:["",[d.required]],task:["",[d.required,d.minLength(3)]],status:["",[d.required]],weekRange:[this.weekOptions[0],d.required]});return t.get("endDate")?.valueChanges.subscribe(()=>{let e=t.get("startDate")?.value,a=t.get("endDate")?.value;if(!e||!a)return this.dateError=null,!0;let s=new Date(e),ve=new Date(a);return s>ve?(this.dateError="Start date cannot be greater than end date",!1):(this.dateError=null,!0)}),t}get weeklyUpdates(){return this.employeeUpdateForm.get("weeklyUpdates")}addMore(){this.weeklyUpdates.push(this.createWeeklyUpdateGroup())}removeUpdate(t){this.weeklyUpdates.removeAt(t)}onSubmit(){if(this.employeeUpdateForm.valid){let t={projectId:"",date:this.employeeUpdateForm.value.weeklyUpdates[0].startDate,task:this.employeeUpdateForm.value.weeklyUpdates[0].task},e={employee_id:this.userInfo.id,project_id:this.projectInfo,employee_name:this.userInfo.firstName,summary:this.employeeUpdateForm.value.summary,daily_updates:this.employeeUpdateForm.value.weeklyUpdates,projectName:this.userInfo.projectName,techstack:this.userInfo.techstack};this.summary.addEmployeeTask(e),console.log("Form submitted:",this.employeeUpdateForm.value)}else this.markFormGroupTouched(this.employeeUpdateForm)}markFormGroupTouched(t){Object.values(t.controls).forEach(e=>{e.markAsTouched(),(e instanceof V||e instanceof L)&&this.markFormGroupTouched(e)})}setOpen(t){this.modalCtrl.dismiss(),console.log(this.modalCtrl),this.employeeUpdateForm.reset()}isInvalid(t){let e=this.employeeUpdateForm.get(t);return!!(e&&e.invalid&&e.touched)}isValid(t){let e=this.employeeUpdateForm.get(t);return!!(e&&e.valid&&e.touched)}static{this.\u0275fac=function(e){return new(e||r)(k(R))}}static{this.\u0275cmp=b({type:r,selectors:[["app-employee-update"]],standalone:!0,features:[F([x]),w],decls:21,vars:2,consts:[[1,"modal-wrapper"],["color","light"],["slot","end"],["fill","clear",3,"click"],["name","close-outline",1,"icon-medium"],[1,"register-form",3,"ngSubmit","formGroup"],["formArrayName","weeklyUpdates"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"close",3,"click"],[1,"save"],[3,"formGroupName"],["size","8"],["lines","none",1,"custom-item"],["position","stacked",1,"label-texts"],["formControlName","weekRange","interface","popover",1,"label-texts"],[3,"value",4,"ngFor","ngForOf"],["size","4"],["formControlName","status","interface","popover",1,"label-texts"],["value","Progress"],["value","Pending"],["value","Completed"],["value","Blocker"],["value","Alice Johnson"],["value","Bob Smith"],["value","Charlie Lee"],["value","Diana Cruz"],["value","Ethan Patel"],["formControlName","status","interface","popover","multiple","true",1,"label-texts"],[1,"ion-align-items-center"],["size","10"],["formControlName","Comments","label","Comments","labelPlacement","floating","placeholder","Enter Comments","rows","3",1,"label-texts"],["color","danger",1,"error-message"],["size","1",1,"ion-text-center"],["name","add-outline","color","primary",2,"cursor","pointer","font-size","24px","margin-top","6px",3,"click"],["size","1","class","ion-text-center",4,"ngIf"],[3,"value"],["name","trash-outline","color","danger",2,"cursor","pointer","font-size","24px","margin-top","6px",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title")(4,"b"),n(5,"Project Status Update"),i()(),o(6,"ion-buttons",2)(7,"ion-button",3),u("click",function(){return a.setOpen(!1)}),_(8,"ion-icon",4),i()()()(),o(9,"ion-content")(10,"form",5),u("ngSubmit",function(){return a.onSubmit()}),o(11,"ion-grid")(12,"div",6),h(13,xe,69,28,"div",7),i()()()(),o(14,"ion-footer")(15,"ion-toolbar")(16,"ion-buttons",2)(17,"ion-button",8),u("click",function(){return a.setOpen(!1)}),n(18,"Close"),i(),o(19,"ion-button",9),n(20," Submit All Updates "),i()()()()()),e&2&&(l(10),p("formGroup",a.employeeUpdateForm),l(3),p("ngForOf",a.weeklyUpdates.controls))},dependencies:[fe,X,Q,Y,Z,ee,te,ie,oe,ne,re,ae,le,se,me,pe,ce,de,$,H,P,D,T,W,G,O,j,M,J,A,z],styles:[".textarea-fill-outline[_ngcontent-%COMP%]{margin-top:10px!important}[_nghost-%COMP%]{display:flex;flex-direction:column;height:80%}ion-content[_ngcontent-%COMP%]{flex:1;--padding-bottom: 0;--margin-bottom: 0}ion-footer[_ngcontent-%COMP%]{position:relative}ion-grid[_ngcontent-%COMP%]{margin-top:15px}"]})}}return r})();export{ze as a};
