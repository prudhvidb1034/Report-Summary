import{a as d,b as f,c as s}from"./chunk-IPEDQWQT.js";import{P as p,Q as h}from"./chunk-LCAD2BME.js";import{J as o,S as n,U as c,Ua as l,_ as u,ea as i}from"./chunk-6BICWZAS.js";var $=(()=>{class a extends p{constructor(){super({account:[],loading:!1,error:null}),this.sharedservice=i(f),this._accountCreateStatus=l(null),this.accountCreateStatus=this._accountCreateStatus.asReadonly(),this.toast=i(d),this.account$=this.select(t=>t.account),this.loading$=this.select(t=>t.loading),this.error$=this.select(t=>t.error),this.createAccount=this.effect(t=>t.pipe(o(e=>(this.patchState({loading:!0,error:null}),this.sharedservice.postData(s.CREATE_ACCOUNT,e).pipe(c({next:r=>{this.patchState({account:[r],loading:!1}),this._accountCreateStatus.set("success")},error:()=>{this.patchState({loading:!1,error:""}),this._accountCreateStatus.set("error")}})))))),this.getAccounts=this.effect(t=>t.pipe(c(()=>this.patchState({loading:!0,error:null})),n(()=>this.sharedservice.getData(s.CREATE_ACCOUNT).pipe(h(e=>{this.patchState({account:e.data,loading:!1})},e=>{this.patchState({loading:!1,error:"Failed to fetch accounts"}),this.toast.show("error","Failed to load accounts!")}))))),this.updateAccount=this.effect(t=>t.pipe(o(({id:e,data:r})=>(this.patchState({loading:!0,error:null}),this.sharedservice.patchData(`${s.CREATE_ACCOUNT}/${e}`,r).pipe(c({next:C=>{this._accountCreateStatus.set("update"),this.patchState({loading:!1})},error:()=>{this._accountCreateStatus.set("error"),this.patchState({loading:!1,error:"Failed to update account"}),this.toast.show("error","Update failed!")}})))))),this.deleteAccount=this.effect(t=>t.pipe(o(e=>this.sharedservice.deleteData(`${s.CREATE_ACCOUNT}/${e}`).pipe(h(()=>{this._accountCreateStatus.set("deleted"),this.getAccounts(),this.toast.show("success","Account deleted successfully!")},r=>{this.toast.show("error","Failed to delete account!")})))))}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=u({token:a,factory:a.\u0275fac})}}return a})();export{$ as a};
