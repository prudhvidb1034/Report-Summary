import{a as U,b as D}from"./chunk-FIIRCHDF.js";import"./chunk-YIKJSF4E.js";import{a as L}from"./chunk-JNKSMFVL.js";import{a as se,b as pe}from"./chunk-XV76ZKRI.js";import{a as z}from"./chunk-IPEDQWQT.js";import{Ca as I,Da as M,H as W,T as G,X as H,Y as q,ba as J,ca as K,da as Q,ea as X,fa as Y,ga as Z,ia as ee,ja as te,ka as oe,oa as ie,pa as ne,sa as re,va as le,w as B,xa as ae,z as V}from"./chunk-LCAD2BME.js";import"./chunk-JBQ62U6C.js";import"./chunk-WANN5XP4.js";import{f as O,g as S,i as w,j as P,t as F,v as A}from"./chunk-X2ZI6WJC.js";import"./chunk-OKAK23HW.js";import"./chunk-3ZBN7PZY.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-XGS4H5SF.js";import"./chunk-RS5W3JWO.js";import"./chunk-2U2U3MQ2.js";import"./chunk-WQJ4QNRK.js";import{Ab as $,Bb as C,Eb as f,Fb as g,La as a,Ma as N,_a as d,ab as s,db as n,ea as _,eb as r,fb as b,jb as T,kb as m,la as y,lb as h,tb as u,ub as x,va as E,wa as j,xb as R,yb as v,zb as k}from"./chunk-6BICWZAS.js";import"./chunk-QA7HW7QI.js";import"./chunk-RKR3YXXE.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-IDKUYNE4.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-MHPMO34D.js";import"./chunk-R52CLOUQ.js";import"./chunk-OUUNPNPW.js";import"./chunk-CPYOLLZG.js";import"./chunk-B7AAHVZY.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-FP7EQKGB.js";function ue(i,c){if(i&1){let e=T();n(0,"ion-item",17),m("click",function(){let o=E(e).$implicit,l=h(3);return j(l.selectProject(o.projectName))}),n(1,"ion-label"),u(2),r()()}if(i&2){let e=c.$implicit;a(2),x(e.projectName)}}function he(i,c){if(i&1&&(n(0,"ion-list",15),d(1,ue,3,1,"ion-item",16),r()),i&2){let e=c.ngIf,t=h(2);a(),s("ngForOf",t.filterItems(e,t.projectSearch,"projectName",t.projectSelected))}}function fe(i,c){if(i&1&&(n(0,"ion-row")(1,"ion-col",7),d(2,he,2,1,"ion-list",14),f(3,"async"),r()()),i&2){let e=h();a(2),s("ngIf",g(3,1,e.teamsList$))}}function ge(i,c){if(i&1){let e=T();n(0,"ion-item",17),m("click",function(){let o=E(e).$implicit,l=h(3);return j(l.selectEmployee(o.firstName))}),n(1,"ion-label"),u(2),r()()}if(i&2){let e=c.$implicit;a(2),x(e.firstName)}}function ye(i,c){if(i&1&&(n(0,"ion-list",15),d(1,ge,3,1,"ion-item",16),r()),i&2){let e=c.ngIf,t=h(2);a(),s("ngForOf",t.filterItems(e,t.employeeSearch,"firstName",t.employeeSelected))}}function be(i,c){if(i&1&&(n(0,"ion-row")(1,"ion-col",7),d(2,ye,2,1,"ion-list",14),f(3,"async"),r()()),i&2){let e=h();a(2),s("ngIf",g(3,1,e.registerList$))}}var ce=(()=>{class i{constructor(e){this.modalCtrl=e,this.toaster=_(z),this.projectSearch="",this.employeeSearch="",this.projectSelected=!1,this.employeeSelected=!1,this.modalCtrl.getTop().then(t=>{t?.componentProps&&(this.teamsList$=t.componentProps.teamsList$,this.registerList$=t.componentProps.registerList$)})}selectProject(e){this.projectSearch=e,this.projectSelected=!0}selectEmployee(e){this.employeeSearch=e,this.employeeSelected=!0}clearProjectSearch(){this.projectSearch="",this.projectSelected=!1}clearEmployeeSearch(){this.employeeSearch="",this.employeeSelected=!1}onProjectTyping(){this.projectSelected=!1}onEmployeeTyping(){this.employeeSelected=!1}filterItems(e,t,o,l){return!t||l?[]:e.filter(p=>p[o]?.toString().toLowerCase().includes(t.toLowerCase()))}closeModal(){this.modalCtrl.dismiss()}tagEmployee(){if(!this.projectSelected||!this.employeeSelected){this.toaster.show("warning","Please enter all fields!");return}this.modalCtrl.dismiss(),this.toaster.show("success","Employee tagged successfully!")}static{this.\u0275fac=function(t){return new(t||i)(N(I))}}static{this.\u0275cmp=y({type:i,selectors:[["app-reusable-pop-up"]],standalone:!0,features:[C],decls:31,vars:6,consts:[[1,"modal-wrapper"],["color","light"],["slot","start"],["slot","end"],["fill","clear",3,"click"],["name","close-outline",1,"icon-medium"],[1,"ion-padding"],["size","8"],[1,"ion-margin"],[3,"ngModelChange","ionClear","ionInput","ngModel","debounce"],[4,"ngIf"],["size","8",1,"ion-margin-top"],["animated","true",3,"ngModelChange","ionClear","ionInput","ngModel","debounce"],[3,"click"],["class","scroll-list",4,"ngIf"],[1,"scroll-list"],["button","","lines","none",3,"click",4,"ngFor","ngForOf"],["button","","lines","none",3,"click"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-buttons",2)(4,"ion-title")(5,"b"),u(6,"Tag Employee"),r()()(),n(7,"ion-buttons",3)(8,"ion-button",4),m("click",function(){return o.closeModal()}),b(9,"ion-icon",5),r()()()(),n(10,"ion-content",6)(11,"ion-grid")(12,"ion-row")(13,"ion-col",7)(14,"ion-label",8),u(15,"Project Name"),r(),n(16,"ion-searchbar",9),k("ngModelChange",function(p){return v(o.projectSearch,p)||(o.projectSearch=p),p}),m("ionClear",function(){return o.clearProjectSearch()})("ionInput",function(){return o.onProjectTyping()}),r()()(),d(17,fe,4,3,"ion-row",10),n(18,"ion-row")(19,"ion-col",11)(20,"ion-label",8),u(21,"Employee Name"),r(),n(22,"ion-searchbar",12),k("ngModelChange",function(p){return v(o.employeeSearch,p)||(o.employeeSearch=p),p}),m("ionClear",function(){return o.clearEmployeeSearch()})("ionInput",function(){return o.onEmployeeTyping()}),r()()(),d(23,be,4,3,"ion-row",10),r()(),n(24,"ion-footer")(25,"ion-toolbar")(26,"ion-buttons",3)(27,"ion-button",13),m("click",function(){return o.closeModal()}),u(28,"Close"),r(),n(29,"ion-button",13),m("click",function(){return o.tagEmployee()}),u(30,"Save"),r()()()()()),t&2&&(a(16),R("ngModel",o.projectSearch),s("debounce",300),a(),s("ngIf",o.projectSearch&&!o.projectSelected),a(5),R("ngModel",o.employeeSearch),s("debounce",300),a(),s("ngIf",o.employeeSearch&&!o.employeeSelected))},dependencies:[M,H,q,J,K,Q,X,Y,Z,ee,te,oe,ie,ne,le,ae,G,P,O,S,w,W,B,V],styles:[".modal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:var(--ion-background-color, #fff);overflow:hidden;box-shadow:0 8px 16px #00000040}.custom-searchbar[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]{border-bottom:none!important}.dropdown-wrapper[_ngcontent-%COMP%]{position:relative;z-index:10;margin-top:-8px}.custom-list[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin:0;padding:0}ion-item[_ngcontent-%COMP%]{--border-width: 0;--inner-border-width: 0}.scroll-list[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto;border-radius:8px;box-shadow:0 2px 8px #0000001a}.ion-margin[_ngcontent-%COMP%]{margin-left:7px}ion-searchbar.search-bar-input[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{background-color:#f6f5f5!important}"]})}}return i})();function Ce(i,c){i&1&&(n(0,"div",2),b(1,"ion-spinner",3),r())}var Ae=(()=>{class i{constructor(){this.label="Employee",this.modalController=_(I),this.route=_(A),this.router=_(F),this.projectStore=_(L),this.registerStore=_(U),this.registerList$=this.registerStore.register$,this.teamsList$=this.projectStore.team$,this.isLoading$=this.registerStore.select(e=>e.loading),this.columns=[{header:"Employee ID",field:"personId"},{header:"Employee Name",field:"firstName"},{header:"Mail id",field:"email"},{header:"Project",field:"projectNames"},{header:"Action",field:"action",type:["edit","delete"]}]}ngOnInit(){this.projectStore.getTeam(),this.registerStore.getRegisterData("employee"),this.router.paramMap.subscribe(e=>{console.log(e.get("id")),this.employeeId=e.get("id")})}handleRowAction(e){switch(e.type){case"create":this.loadCreateEmployeeModal();break;case"tagEmployee":this.loadtagEmployeeModal();break;case"edit":this.EditCreateEmployeeModal(e.item);break;case"delete":this.deleteModal(e.item);break;default:console.log("Unknown action type:",e.type)}}loadCreateEmployeeModal(){this.modalController.create({component:D,cssClass:"register-modal",componentProps:{role:"employee"}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{this.registerStore.getRegisterData("employee"),console.log("Modal dismissed with data:",t)})})}EditCreateEmployeeModal(e){this.modalController.create({component:D,cssClass:"register-modal",componentProps:{role:"employee",editData:e}}).then(t=>{t.present(),t.onDidDismiss().then(o=>{this.registerStore.getRegisterData("employee"),console.log("Modal dismissed with data:",o)})})}loadtagEmployeeModal(){this.modalController.create({component:ce,cssClass:"reusable-popUp-modal",componentProps:{teamsList$:this.teamsList$,registerList$:this.registerList$}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}deleteModal(e){this.modalController.create({component:pe,cssClass:"custom-delete-modal",componentProps:{role:"delete",data:{id:e.personId,name:e.firstName}}}).then(t=>{t.present(),t.onDidDismiss().then(o=>{o?.data?.confirmed&&this.registerStore.deleteProject(o.data.id)})})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-employees"]],standalone:!0,features:[$([L,U]),C],decls:3,vars:6,consts:[[3,"rowAction","columns","data","label"],["class","loader-overlay",4,"ngIf"],[1,"loader-overlay"],["name","crescent"]],template:function(t,o){t&1&&(n(0,"app-reusable-table",0),m("rowAction",function(p){return o.handleRowAction(p)}),r(),d(1,Ce,2,0,"div",1),f(2,"async")),t&2&&(s("columns",o.columns)("data",o.registerList$)("label",o.label),a(),s("ngIf",g(2,4,o.isLoading$)))},dependencies:[se,M,re,P,S,w]})}}return i})();export{Ae as EmployeesComponent};
