import{a as R}from"./chunk-R5QTWCYP.js";import{a as _}from"./chunk-2YQHNUEK.js";import"./chunk-YIKJSF4E.js";import{a as C,b as M}from"./chunk-XV76ZKRI.js";import{e as b}from"./chunk-IPEDQWQT.js";import{Ca as g,Da as y,I as k}from"./chunk-LCAD2BME.js";import"./chunk-JBQ62U6C.js";import"./chunk-WANN5XP4.js";import{j as h,v as f}from"./chunk-X2ZI6WJC.js";import"./chunk-OKAK23HW.js";import"./chunk-3ZBN7PZY.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-XGS4H5SF.js";import"./chunk-RS5W3JWO.js";import"./chunk-2U2U3MQ2.js";import"./chunk-WQJ4QNRK.js";import{Ab as u,Bb as w,G as s,ab as m,db as d,ea as r,eb as c,kb as p,la as l,p as n,t as i}from"./chunk-6BICWZAS.js";import"./chunk-QA7HW7QI.js";import"./chunk-RKR3YXXE.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-IDKUYNE4.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-MHPMO34D.js";import"./chunk-R52CLOUQ.js";import"./chunk-OUUNPNPW.js";import"./chunk-CPYOLLZG.js";import"./chunk-B7AAHVZY.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-FP7EQKGB.js";var J=(()=>{class o{constructor(){this.label="Summary",this.modalController=r(g),this.loginStore=r(b),this.route=r(f),this.userRole$=this.loginStore.user$.pipe(i(e=>e?.role?.toLocaleLowerCase())),this.summary=[{weekId:"WEEK 01-June-2025 To 07-June-2025",weekNo:0,status:"Active",viewTask:"View Task",viewReport:"View Report"},{weekId:"WEEK 08-June-2025 To 14-June-2025",weekNo:1,status:"InActive",viewTask:"View Task",viewReport:"View Report"}],this.summarylist$=n(this.summary)}ngOnInit(){this.userRole$.pipe(s(1)).subscribe(e=>{this.role=e,console.log("User role:",e)}),this.role=="employee"?this.columns=[{header:"Name ",field:"weekId"},{header:"View Task",field:"viewTask",linkEnable:!0},{header:"View Report",field:"viewReport",linkEnable:!0}]:this.columns=[{header:"Name ",field:"weekId"},{header:"Status",field:"status"},{header:"View Task",field:"viewTask",linkEnable:!0},{header:"View Report",field:"viewReport",linkEnable:!0},{header:"Action",field:"action",type:["edit","delete"]}],console.log(this.userRole$)}handleRowAction(e){switch(console.log(e),e.type){case"viewTask":this.route.navigate(["summary/task",e.item.weekNo]);break;case"viewReport":this.route.navigate(["summary/project-status",e.item.weekNo]);break;case"create":this.loadCreateEmployeeModal();break;case"toggle-status":this.updatedRowData(e);break;case"createStatus":this.updateWeeklySummary();break;case"edit":this.loadCreateEmployeeModal();break;case"delete":this.deleteModal();break;default:console.log("Unknown action type:",e.type)}}updatedRowData(e){this.summary.filter(t=>t.weekId===e.item.weekId?t.status=e.value:""),console.log(e)}loadCreateEmployeeModal(){this.modalController.create({component:R,cssClass:"create-summary-modal",componentProps:{}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}updateWeeklySummary(){this.route.navigate(["/summary/employee-dashboard"])}deleteModal(){this.modalController.create({component:M,cssClass:"custom-delete-modal",componentProps:{role:"delete"}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=l({type:o,selectors:[["app-summary"]],standalone:!0,features:[u([_]),w],decls:1,vars:3,consts:[[3,"rowAction","columns","data","label"]],template:function(t,a){t&1&&(d(0,"app-reusable-table",0),p("rowAction",function(P){return a.handleRowAction(P)}),c()),t&2&&m("columns",a.columns)("data",a.summarylist$)("label",a.label)},dependencies:[y,h,k,C],styles:[".week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{align-items:center}.week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:8px 4px;word-break:break-word}.week-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{font-weight:700;border-bottom:1px solid #ccc;background-color:#f9f9f9}.week-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{border-bottom:1px solid #eee;background-color:#fff}@media (max-width: 768px){.week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{flex-wrap:wrap}.week-table[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;justify-content:flex-start}}"]})}}return o})();export{J as SummaryComponent};
