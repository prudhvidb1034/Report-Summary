import{a as g}from"./chunk-PYY3LFOJ.js";import{a as ct,b as lt}from"./chunk-XV76ZKRI.js";import{a as U,b as j}from"./chunk-IPEDQWQT.js";import{A as $,B as L,Ca as T,Da as x,E as R,G as B,I as G,T as z,X as H,Y as J,ba as K,ca as Q,da as W,ea as X,fa as Y,ga as Z,ha as tt,ia as et,oa as ot,sa as N,ta as nt,v as w,va as it,w as q,x as V,xa as at}from"./chunk-LCAD2BME.js";import"./chunk-JBQ62U6C.js";import"./chunk-WANN5XP4.js";import{g as I,i as F,j as M}from"./chunk-X2ZI6WJC.js";import"./chunk-OKAK23HW.js";import"./chunk-3ZBN7PZY.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-XGS4H5SF.js";import"./chunk-RS5W3JWO.js";import"./chunk-2U2U3MQ2.js";import"./chunk-WQJ4QNRK.js";import{Ab as A,Bb as b,Eb as D,Fb as y,La as a,Vb as P,_a as r,ab as d,bb as S,cb as p,db as c,ea as s,eb as i,fb as f,kb as _,la as v,lb as E,tb as h,vb as k}from"./chunk-6BICWZAS.js";import"./chunk-QA7HW7QI.js";import"./chunk-RKR3YXXE.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-IDKUYNE4.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-MHPMO34D.js";import"./chunk-R52CLOUQ.js";import"./chunk-OUUNPNPW.js";import"./chunk-CPYOLLZG.js";import"./chunk-B7AAHVZY.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-FP7EQKGB.js";function ut(n,u){n&1&&(c(0,"p"),h(1,"Account Name is required."),i())}function mt(n,u){n&1&&(c(0,"p"),h(1,"Minimum 3 characters required."),i())}function pt(n,u){if(n&1&&(c(0,"ion-text",10),r(1,ut,2,0,"p")(2,mt,2,0,"p"),i()),n&2){let t,o,e=E();a(),p(1,!((t=e.accountForm.get("accountName"))==null||t.errors==null)&&t.errors.required?1:-1),a(),p(2,!((o=e.accountForm.get("accountName"))==null||o.errors==null)&&o.errors.minlength?2:-1)}}function ft(n,u){n&1&&(c(0,"p"),h(1,"Start Date is required."),i())}function ht(n,u){if(n&1&&(c(0,"ion-text",10),r(1,ft,2,0,"p"),i()),n&2){let t,o=E();a(),p(1,!((t=o.accountForm.get("accountStartDate"))==null||t.errors==null)&&t.errors.required?1:-1)}}function Ct(n,u){n&1&&(c(0,"p"),h(1,"End Date is required."),i())}function _t(n,u){if(n&1&&(c(0,"ion-text",10),r(1,Ct,2,0,"p"),i()),n&2){let t,o=E();a(),p(1,!((t=o.accountForm.get("accountEndDate"))==null||t.errors==null)&&t.errors.required?1:-1)}}function gt(n,u){n&1&&(c(0,"div",16),f(1,"ion-spinner",17),i())}var O=(()=>{class n{constructor(){this.sharedservice=s(j),this.isModalOpen=!1,this.modalCtrl=s(T),this.fb=s(B),this.toast=s(U),this.isEditMode=!1,this.accountStore=s(g),this.accounts$=this.accountStore.account$,this.isLoading$=this.accountStore.select(t=>t.loading),this.accountStatusEffect=P(()=>{let t=this.accountStore.accountCreateStatus();t==="success"?(this.setOpen(!1),this.toast.show("success","Account created successfully!")):t==="update"?(this.setOpen(!1),this.toast.show("success","Account updated successfully!")):t==="deleted"?this.toast.show("success","Account deleted successfully!"):t==="error"&&this.toast.show("error","Something went wrong!")})}ngOnInit(){this.creteForm(),this.accountStore.getAccounts(),this.editData&&(this.accountForm.patchValue(this.editData),this.isEditMode=!0)}creteForm(){this.accountForm=this.fb.group({accountName:["",w.required],accountStartDate:["",w.required],accountEndDate:["",w.required]})}setOpen(t){this.isModalOpen=t,t||(this.isEditMode=!1,this.accountForm.reset(),this.modalCtrl.dismiss())}SubmitForm(){if(this.accountForm.valid){let t=this.accountForm.value;this.isEditMode&&this.editData?.accountId?this.accountStore.updateAccount({id:this.editData.accountId,data:t}):this.accountStore.createAccount(t)}else this.accountForm.markAllAsTouched()}isInvalid(t){let o=this.accountForm.get(t);return!!(o&&o.invalid&&o.touched)}isValid(t){let o=this.accountForm.get(t);return!!(o&&o.valid&&o.touched)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=v({type:n,selectors:[["app-create-account"]],inputs:{editData:"editData"},standalone:!0,features:[A([g]),b],decls:36,vars:24,consts:[[1,"modal-wrapper"],["color","light"],["slot","start"],["slot","end"],["fill","clear",3,"click"],["name","close-outline",1,"icon-medium"],[3,"formGroup"],["size","6"],["lines","none",1,"custom-item"],["formControlName","accountName","label","Account Name","labelPlacement","floating","placeholder","Enter account name",1,"label-texts",3,"clearOnEdit"],["color","danger",1,"error-message"],["formControlName","accountStartDate","label","Start Date","labelPlacement","floating","type","date",1,"label-texts",3,"clearOnEdit"],["formControlName","accountEndDate","label","End Date","labelPlacement","floating","type","date",1,"label-texts",3,"clearOnEdit"],[1,"close",3,"click"],[1,"save",3,"click"],["class","loader-overlay",4,"ngIf"],[1,"loader-overlay"],["name","crescent"]],template:function(o,e){if(o&1&&(c(0,"div",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-buttons",2)(4,"ion-title")(5,"b"),h(6),i()()(),c(7,"ion-buttons",3)(8,"ion-button",4),_("click",function(){return e.setOpen(!1)}),f(9,"ion-icon",5),i()()()(),c(10,"ion-content")(11,"form",6)(12,"ion-grid")(13,"ion-row")(14,"ion-col",7)(15,"ion-item",8),f(16,"ion-input",9),i(),r(17,pt,3,2,"ion-text",10),i(),c(18,"ion-col",7)(19,"ion-item",8),f(20,"ion-input",11),i(),r(21,ht,2,1,"ion-text",10),i()(),c(22,"ion-row")(23,"ion-col",7)(24,"ion-item",8),f(25,"ion-input",12),i(),r(26,_t,2,1,"ion-text",10),i()()()()(),c(27,"ion-footer")(28,"ion-toolbar")(29,"ion-buttons",3)(30,"ion-button",13),_("click",function(){return e.setOpen(!1)}),h(31,"Close"),i(),c(32,"ion-button",14),_("click",function(){return e.SubmitForm()}),h(33),i()()()()(),r(34,gt,2,0,"div",15),D(35,"async")),o&2){let l,m,C;a(6),k(" ",e.isEditMode?"Update":"Create"," Account"),a(5),d("formGroup",e.accountForm),a(4),S("invalid",e.isInvalid("accountName"))("valid",e.isValid("accountName")),a(),d("clearOnEdit",!0),a(),p(17,(l=e.accountForm.get("accountName"))!=null&&l.invalid&&((l=e.accountForm.get("accountName"))!=null&&l.dirty||(l=e.accountForm.get("accountName"))!=null&&l.touched)?17:-1),a(2),S("invalid",e.isInvalid("accountStartDate"))("valid",e.isValid("accountStartDate")),a(),d("clearOnEdit",!0),a(),p(21,(m=e.accountForm.get("accountStartDate"))!=null&&m.invalid&&((m=e.accountForm.get("accountStartDate"))!=null&&m.dirty||(m=e.accountForm.get("accountStartDate"))!=null&&m.touched)?21:-1),a(3),S("invalid",e.isInvalid("accountEndDate"))("valid",e.isValid("accountEndDate")),a(),d("clearOnEdit",!0),a(),p(26,(C=e.accountForm.get("accountEndDate"))!=null&&C.invalid&&((C=e.accountForm.get("accountEndDate"))!=null&&C.dirty||(C=e.accountForm.get("accountEndDate"))!=null&&C.touched)?26:-1),a(7),k(" ",e.isEditMode?"Update":"Save"," "),a(),d("ngIf",y(35,22,e.isLoading$))}},dependencies:[M,I,F,x,H,J,K,Q,W,X,Y,Z,tt,et,ot,N,nt,it,at,z,G,$,q,V,L,R],styles:[".modal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:var(--ion-background-color, #fff);overflow:hidden;box-shadow:0 8px 16px #00000040}ion-grid[_ngcontent-%COMP%]{margin-top:10px}"]})}}return n})();function vt(n,u){n&1&&(c(0,"div",2),f(1,"ion-spinner",3),i())}var Lt=(()=>{class n{constructor(){this.modalController=s(T),this.label="Account",this.accountStore=s(g),this.isLoading$=this.accountStore.select(t=>t.loading),this.columns=[{header:"Account Name",field:"accountName"},{header:"Start Date",field:"accountStartDate"},{header:"End Date",field:"accountEndDate"},{header:"Action",field:"action",type:["edit","delete"]}],this.accountStore.getAccounts(),this.accountList$=this.accountStore.account$}ngOnInit(){}handleRowAction(t){switch(t.type){case"create":this.loadCreateEmployeeModal();break;case"delete":t.type==="delete"&&(console.log("Row from table:",t.item),this.deleteModal(t.item));break;case"edit":this.updateCreateEmployeeModal(t.item);break;default:console.log("Unknown action type:",t.type)}}loadCreateEmployeeModal(){this.modalController.create({component:O,cssClass:"create-account-modal",componentProps:{}}).then(t=>{t.present(),t.onDidDismiss().then(o=>{this.accountStore.getAccounts(),console.log("Modal dismissed with data:",o)})})}updateCreateEmployeeModal(t){console.log("Selected row data:",t),this.modalController.create({component:O,cssClass:"create-account-modal",componentProps:{editData:t}}).then(o=>{o.present(),o.onDidDismiss().then(e=>{this.accountStore.getAccounts(),console.log("Modal dismissed with data:",e)})})}deleteModal(t){this.modalController.create({component:lt,cssClass:"custom-delete-modal",componentProps:{role:"delete",data:{id:t.accountId,name:t.accountName}}}).then(o=>{o.present(),o.onDidDismiss().then(e=>{e?.data?.confirmed&&this.accountStore.deleteAccount(e.data.id)})})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=v({type:n,selectors:[["app-account-create"]],standalone:!0,features:[A([g]),b],decls:4,vars:6,consts:[[3,"rowAction","columns","data","label"],["class","loader-overlay",4,"ngIf"],[1,"loader-overlay"],["name","crescent"]],template:function(o,e){o&1&&(c(0,"div")(1,"app-reusable-table",0),_("rowAction",function(m){return e.handleRowAction(m)}),i()(),r(2,vt,2,0,"div",1),D(3,"async")),o&2&&(a(),d("columns",e.columns)("data",e.accountList$)("label",e.label),a(),d("ngIf",y(3,4,e.isLoading$)))},dependencies:[ct,M,I,F,x,N]})}}return n})();export{Lt as AccountCreateComponent};
