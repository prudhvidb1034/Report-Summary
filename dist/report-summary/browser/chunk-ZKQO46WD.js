import{a as R}from"./chunk-YDOEYQUL.js";import{a as C,b as M}from"./chunk-SQRLWJCJ.js";import{a as P}from"./chunk-3PMNZXYW.js";import{a as _}from"./chunk-N64FFWOQ.js";import"./chunk-PJWGF4NK.js";import{e as b}from"./chunk-OTROWG7S.js";import{Ba as g,Ca as y,I as k}from"./chunk-N46ENOW6.js";import{j as h,v as f}from"./chunk-ETXJNP3A.js";import"./chunk-4FRUSUS7.js";import"./chunk-QUJFQN2Y.js";import"./chunk-DUKM7HWQ.js";import"./chunk-XNADYL7L.js";import"./chunk-3GJ7TQK2.js";import"./chunk-4AJ5TPEV.js";import{Ab as u,Bb as w,G as s,ab as m,db as d,ea as a,eb as p,kb as c,la as l,p as r,t as i}from"./chunk-45DPJSY7.js";import"./chunk-JWVEZ7LL.js";import"./chunk-J4Z3Y3GN.js";import"./chunk-6IHAYORV.js";import"./chunk-L6PNYW6G.js";import"./chunk-WIKMGYWI.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-2ERNAIXA.js";import"./chunk-CKP3SGE2.js";import"./chunk-S25USO7A.js";import"./chunk-2VC3RZCL.js";import"./chunk-GX2ORJUI.js";import"./chunk-DMYLG4UX.js";import"./chunk-DDOBVB2Y.js";import"./chunk-TLQMGTG2.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-FP7EQKGB.js";var L=(()=>{class o{constructor(){this.label="Summary",this.modalController=a(g),this.loginStore=a(b),this.route=a(f),this.userRole$=this.loginStore.user$.pipe(i(e=>e?.role?.toLocaleLowerCase())),this.summary=[{weekId:"WEEK 01-June-2025 To 07-June-2025",weekNo:0,status:"Active",viewTask:"View Task",viewReport:"View Report"},{weekId:"WEEK 08-June-2025 To 14-June-2025",weekNo:1,status:"InActive",viewTask:"View Task",viewReport:"View Report"}],this.summarylist$=r(this.summary)}ngOnInit(){this.userRole$.pipe(s(1)).subscribe(e=>{this.role=e,console.log("User role:",e)}),this.role=="employee"?this.columns=[{header:"Name ",field:"weekId"},{header:"View Task",field:"viewTask",linkEnable:!0},{header:"View Report",field:"viewReport",linkEnable:!0}]:this.columns=[{header:"Name ",field:"weekId"},{header:"Status",field:"status"},{header:"View Task",field:"viewTask",linkEnable:!0},{header:"View Report",field:"viewReport",linkEnable:!0},{header:"Action",field:"action",type:["edit","delete"]}],console.log(this.userRole$)}handleRowAction(e){switch(console.log(e),e.type){case"viewTask":this.route.navigate(["summary/task",e.item.weekNo]);break;case"viewReport":this.route.navigate(["summary/project-status",e.item.weekNo]);break;case"create":this.loadCreateEmployeeModal();break;case"toggle-status":this.updatedRowData(e);break;case"createStatus":this.updateWeeklySummary();break;case"edit":this.loadCreateEmployeeModal();break;case"delete":this.deleteModal();break;default:console.log("Unknown action type:",e.type)}}updatedRowData(e){this.summary.filter(t=>t.weekId===e.item.weekId?t.status=e.value:""),console.log(e)}loadCreateEmployeeModal(){this.modalController.create({component:R,componentProps:{}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}updateWeeklySummary(){this.modalController.create({component:P,cssClass:"employee-update-popup",componentProps:{}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}deleteModal(){this.modalController.create({component:M,cssClass:"custom-delete-modal",componentProps:{role:"delete"}}).then(e=>{e.present(),e.onDidDismiss().then(t=>{console.log("Modal dismissed with data:",t)})})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=l({type:o,selectors:[["app-summary"]],standalone:!0,features:[u([_]),w],decls:1,vars:3,consts:[[3,"rowAction","columns","data","label"]],template:function(t,n){t&1&&(d(0,"app-reusable-table",0),c("rowAction",function(S){return n.handleRowAction(S)}),p()),t&2&&m("columns",n.columns)("data",n.summarylist$)("label",n.label)},dependencies:[y,h,k,C],styles:[".week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{align-items:center}.week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:8px 4px;word-break:break-word}.week-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{font-weight:700;border-bottom:1px solid #ccc;background-color:#f9f9f9}.week-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{border-bottom:1px solid #eee;background-color:#fff}@media (max-width: 768px){.week-table[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{flex-wrap:wrap}.week-table[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;justify-content:flex-start}}"]})}}return o})();export{L as SummaryComponent};
