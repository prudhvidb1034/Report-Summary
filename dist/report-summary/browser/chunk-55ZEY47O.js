import{a as te}from"./chunk-R5QTWCYP.js";import{a as T}from"./chunk-2YQHNUEK.js";import"./chunk-YIKJSF4E.js";import{a as Z,b as ee}from"./chunk-XV76ZKRI.js";import"./chunk-IPEDQWQT.js";import{Ca as X,Da as Y,H as V,S as L,X as U,ba as G,ea as H,ia as K,oa as q,qa as J,ra as Q,w as z,z as R}from"./chunk-LCAD2BME.js";import"./chunk-JBQ62U6C.js";import"./chunk-WANN5XP4.js";import{f as B,g as N,i as W,j as $}from"./chunk-X2ZI6WJC.js";import"./chunk-OKAK23HW.js";import"./chunk-3ZBN7PZY.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-XGS4H5SF.js";import"./chunk-RS5W3JWO.js";import"./chunk-2U2U3MQ2.js";import"./chunk-WQJ4QNRK.js";import{Ab as A,Bb as D,Eb as O,Fb as F,La as r,_a as u,ab as c,db as l,ea as y,eb as a,fb as M,g as b,gb as P,hb as v,jb as x,kb as h,la as w,lb as g,tb as m,va as I,vb as C,wa as E,xb as j,yb as k,zb as S}from"./chunk-6BICWZAS.js";import"./chunk-QA7HW7QI.js";import"./chunk-RKR3YXXE.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-IDKUYNE4.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-MHPMO34D.js";import"./chunk-R52CLOUQ.js";import"./chunk-OUUNPNPW.js";import"./chunk-CPYOLLZG.js";import"./chunk-B7AAHVZY.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-FP7EQKGB.js";function ne(n,f){if(n&1&&(l(0,"ion-select-option",14),m(1),a()),n&2){let e=f.$implicit;c("value",e.id),r(),C(" ",e.project_name," ")}}function ie(n,f){if(n&1&&(l(0,"ion-select-option",14),m(1),a()),n&2){let e=f.$implicit;c("value",e.employee_id),r(),C(" ",e.employee_name," ")}}function le(n,f){if(n&1){let e=x();P(0),l(1,"app-reusable-table",15),h("rowAction",function(t){I(e);let o=g();return E(o.handleRowAction(t))}),a(),v()}if(n&2){let e=g();r(),c("columns",e.columns)("data",e.projectDataObservable$)}}var je=(()=>{class n{constructor(){this.modalController=y(X),this.projectData$=new b([]),this.projectDataObservable$=this.projectData$.asObservable(),this.getprojects=y(T),this.allProjects=[],this.filteredEmployees=[],this.selectedProjectId="",this.selectedEmployeeId="",this.columns=[{header:"Team ID",field:"id"},{header:"Project Name",field:"project_name"},{header:"Employee Name",field:"employee_name"},{header:"Upcoming Tasks",field:"upcomingTasks"},{header:"Summary",field:"summary"},{header:"Task Type",field:" "},{header:"Key Accomplishments",field:"keyAccomplishments"},{header:"Action",field:"action",type:["edit","delete"]}]}ngOnInit(){this.getprojects.getDetails(),this.getprojects.projects$.subscribe(e=>{this.allProjects=e,this.onSearch()})}onProjectChange(){let e=this.allProjects.find(s=>s.id===this.selectedProjectId);this.filteredEmployees=e?.employees||[],this.selectedEmployeeId=""}onSearch(){if(!this.selectedProjectId){let o=this.allProjects.flatMap(i=>i.employees.map(p=>{let d=p.daily_updates.map(_=>_.task).filter(Boolean).join(", "),oe=p.daily_updates.flatMap(_=>_.keyAccomplishments||[]).join(", ");return{id:i.id,project_name:i.project_name,upcomingTasks:d,employee_name:p.employee_name,summary:p.summary,keyAccomplishments:oe}}));this.projectData$.next(o);return}let e=this.allProjects.find(o=>o.id===this.selectedProjectId);if(!e)return;let t=(this.selectedEmployeeId?e.employees.filter(o=>o.employee_id===this.selectedEmployeeId):e.employees).map(o=>{let i=o.daily_updates.map(d=>d.task).filter(Boolean).join(", "),p=o.daily_updates.flatMap(d=>d.keyAccomplishments||[]).join(", ");return{id:e.id,project_name:e.project_name,upcomingTasks:i,employee_name:o.employee_name,summary:o.summary,keyAccomplishments:p}});this.projectData$.next(t)}handleRowAction(e){switch(e.type){case"edit":this.openModal();break;case"delete":this.deleteModal();break;default:console.log("Unknown action type:",e.type)}}openModal(){this.modalController.create({component:te,componentProps:{}}).then(e=>{e.present(),e.onDidDismiss().then(s=>{console.log("Modal dismissed with data:",s)})})}deleteModal(){this.modalController.create({component:ee,cssClass:"custom-delete-modal",componentProps:{role:"delete"}}).then(e=>{e.present(),e.onDidDismiss().then(s=>{console.log("Modal dismissed with data:",s)})})}static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=w({type:n,selectors:[["app-task"]],standalone:!0,features:[A([T]),D],decls:31,vars:8,consts:[[1,"ion-align-items-center",2,"width","100%"],[2,"display","flex","gap","16px","align-items","center","flex-wrap","wrap"],[2,"font-size","14px","font-weight","bold","margin-left","3px"],["lines","none",1,"custom-item"],["interface","popover","placeholder","Select Project",2,"font-size","13px",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["interface","popover","placeholder","Select Employee",2,"font-size","13px",3,"ngModelChange","ngModel","disabled"],[2,"display","flex","flex-direction","column"],[2,"opacity","0"],[2,"width","180px","height","36px","font-size","13px","--background","#000033",3,"click"],["size","auto"],[2,"display","flex","flex-direction","column","align-items","flex-end"],[1,"custom"],[4,"ngIf"],[3,"value"],[3,"rowAction","columns","data"]],template:function(s,t){s&1&&(l(0,"ion-grid")(1,"ion-row",0)(2,"ion-col")(3,"div",1)(4,"div")(5,"label",2),m(6,"Project"),a(),l(7,"ion-item",3)(8,"ion-select",4),S("ngModelChange",function(i){return k(t.selectedProjectId,i)||(t.selectedProjectId=i),i}),h("ionChange",function(){return t.onProjectChange()}),u(9,ne,2,2,"ion-select-option",5),a()()(),l(10,"div")(11,"label",2),m(12,"Employee"),a(),l(13,"ion-item",3)(14,"ion-select",6),S("ngModelChange",function(i){return k(t.selectedEmployeeId,i)||(t.selectedEmployeeId=i),i}),u(15,ie,2,2,"ion-select-option",5),a()()(),M(16,"div"),l(17,"div",7)(18,"label",8),m(19,"Search"),a(),l(20,"ion-button",9),h("click",function(){return t.onSearch()}),m(21," SEARCH "),a()()()(),l(22,"ion-col",10)(23,"div",11)(24,"label",8),m(25,"Create"),a(),l(26,"ion-button",9),h("click",function(){return t.openModal()}),m(27," Create Task "),a()()()()(),l(28,"div",12),u(29,le,2,2,"ng-container",13),O(30,"async"),a()),s&2&&(r(8),j("ngModel",t.selectedProjectId),r(),c("ngForOf",t.allProjects),r(5),j("ngModel",t.selectedEmployeeId),c("disabled",!t.filteredEmployees.length),r(),c("ngForOf",t.filteredEmployees),r(14),c("ngIf",F(30,6,t.projectDataObservable$)))},dependencies:[Z,$,B,N,W,Y,U,G,H,K,q,J,Q,L,V,z,R],styles:[".custom-item[_ngcontent-%COMP%]{--background: #f6f5f5;width:180px;height:41px}.custom[_ngcontent-%COMP%]{margin-top:20px}"]})}}return n})();export{je as TaskComponent};
