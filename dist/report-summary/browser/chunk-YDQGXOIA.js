import{a as w}from"./chunk-LHZUTBXF.js";import{a as he}from"./chunk-PJWGF4NK.js";import{a as K,c as Q}from"./chunk-OTROWG7S.js";import{A,B as U,Ba as ve,Ca as fe,E as B,G,I as z,K as H,P as J,Q as F,S as W,T as X,X as Y,Y as Z,ba as ee,ca as te,da as ie,ea as oe,fa as ne,ga as re,ha as ae,ia as le,ja as se,oa as me,qa as de,ra as ce,sa as pe,ua as ue,v as u,w as L,wa as ge,x as D}from"./chunk-N46ENOW6.js";import{f as j,j as M,k as q,t as V,v as $}from"./chunk-ETXJNP3A.js";import{Ab as O,Bb as x,J as N,La as a,Ma as k,S as R,Ua as b,_ as S,_a as p,ab as v,bb as f,cb as d,db as n,ea as s,eb as o,fb as h,kb as _,la as T,lb as I,tb as l,vb as E}from"./chunk-45DPJSY7.js";import{a as y}from"./chunk-FP7EQKGB.js";var Se=(()=>{class t{constructor(){this.http=s(q),this.apiUrl=Q.REGISTRATION_DETAILS}registerUser(i){return console.log(i),this.http.post(this.apiUrl,i)}getUsers(){return this.http.get(this.apiUrl)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var C=(()=>{class t extends J{constructor(){super({register:[],loading:!1,error:null}),this.register=s(Se),this.register$=this.select(i=>i.register),this.loading$=this.select(i=>i.loading),this.error$=this.select(i=>i.error),this.addregister=this.effect(i=>i.pipe(N(r=>(this.patchState({loading:!0,error:null}),this.register.registerUser(r).pipe(F(e=>{this.patchState(g=>({register:[...g.register,e],loading:!1,error:null}))},e=>{this.patchState({loading:!1,error:e?.message??"Unknown error"})})))))),this.getRegisterData=this.effect(i=>i.pipe(R(({projectId:r,role:e})=>this.register.getUsers().pipe(F(g=>{let Ce=g.filter(c=>e==="Manager"?c.role==="Manager":c.role===e&&c.teamId===r);this.patchState({register:Ce.map(c=>({id:c.id,employeeId:c.employeeId,firstName:c.firstName,lastName:c.lastName,username:c.username,password:c.password,confirmPassword:c.confirmPassword,role:c.role,projectName:c.projectName}))})},g=>this.patchState({error:"Failed to load team data"}))))))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})();var _e=(()=>{class t{constructor(){}isInvalid(i,r){let e=r.get(i);return!!(e&&e.invalid&&e.touched)}isValid(i,r){let e=r.get(i);return!!(e&&e.valid&&e.touched)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function be(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"Field is required."),o()())}function Ie(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"Last Name is required"),o()())}function Ee(t,m){t&1&&(n(0,"p"),l(1,"Email is required."),o())}function Fe(t,m){t&1&&(n(0,"p"),l(1,"Invalid email format."),o())}function we(t,m){if(t&1&&(n(0,"ion-text",10),p(1,Ee,2,0,"p")(2,Fe,2,0,"p"),o()),t&2){let i,r,e=I();a(),d(1,!((i=e.registrationForm.get("username"))==null||i.errors==null)&&i.errors.required?1:-1),a(),d(2,!((r=e.registrationForm.get("username"))==null||r.errors==null)&&r.errors.email?2:-1)}}function Pe(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"Employee ID is required."),o()())}function ye(t,m){t&1&&(n(0,"p"),l(1,"Password is required."),o())}function Ne(t,m){t&1&&(n(0,"p"),l(1,"Minimum 8 characters required"),o())}function Re(t,m){if(t&1&&(n(0,"ion-text",10),p(1,ye,2,0,"p")(2,Ne,2,0,"p"),o()),t&2){let i,r,e=I();a(),d(1,!((i=e.registrationForm.get("password"))==null||i.errors==null)&&i.errors.required?1:-1),a(),d(2,!((r=e.registrationForm.get("password"))==null||r.errors==null)&&r.errors.minlength?2:-1)}}function Te(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"Confirm Password is required."),o()())}function ke(t,m){t&1&&(n(0,"ion-text",16)(1,"p"),l(2,"Passwords do not match."),o()())}function Oe(t,m){if(t&1&&(n(0,"ion-select-option",31),l(1),o()),t&2){let i=m.$implicit;v("value",i),a(),E(" ",i," ")}}function xe(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"At least one project must be selected."),o()())}function je(t,m){t&1&&(n(0,"ion-text",10)(1,"p"),l(2,"Tech stack selection is required."),o()())}var lt=(()=>{class t{constructor(i){this.navParams=i,this.teamList=b([]),this.teamListData=[],this.teamStore=s(w),this.teamList$=this.teamStore.team$,this.fb=s(G),this.teamRegisterList=b([]),this.getRegisterStore=s(C),this.teamRegisterList$=this.getRegisterStore.register$,this.validationService=s(_e),this.store=s(C),this.projects=[],this.summary=s(he),this.toast=s(K),this.router=s($),this.error$=this.store.error$,this.loading$=this.store.loading$,this.modalCtrl=s(ve),this.register$=this.store.register$,this.routering=s(V),this.isModalOpen=!1,this.role=this.navParams?.get("role"),console.log("Received role:",this.navParams,this.role)}ngOnInit(){this.routering.paramMap.subscribe(i=>{this.projectid=i.get("id")}),this.teamStore.getTeam(),this.createForm(),console.log("prudhvi",this.teamList$),this.teamStore.team$.subscribe(i=>{this.teamListData=i,console.log("Sarath",this.teamListData)}),console.log("varma",this.teamStore.team$),this.getProjects()}ngAfterViewInit(){this.projectid=this.routering.snapshot.paramMap.get("id")}createForm(){this.registrationForm=this.fb.group({firstName:["",[u.required]],lastName:["",[u.required,u.minLength(8)]],username:["",[u.required,u.email]],password:["",[u.required,u.minLength(8)]],confirmPassword:["",[u.required]],employeeId:["",[u.required]],role:[{value:this.role,disabled:!0}],userEntry:["new"],projectName:["",[u.required]],techstack:["",[u.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(i){let r=i.get("password")?.value,e=i.get("confirmPassword")?.value;return r&&e&&r!==e?{passwordMismatch:!0}:null}onModalDismiss(){this.isModalOpen=!1,this.registrationForm.reset()}onCloseClick(){this.isModalOpen=!1,this.registrationForm.reset()}onSubmit(){if(this.registrationForm.valid){let i=y({},this.registrationForm.getRawValue()),r=this.projectid;console.log("Submitting:",i),this.store.addregister(i),this.toast.show("success","Registration completed successfully!"),this.onCloseClick()}else this.registrationForm.markAllAsTouched()}setOpen(i){this.modalCtrl.dismiss(),this.registrationForm.reset()}openModal(){this.router.navigate(["view-all-projects"])}getProjects(){this.summary.getProjectTitles().subscribe(i=>{this.projects=i.map(r=>r.projectname)})}static{this.\u0275fac=function(r){return new(r||t)(k(H))}}static{this.\u0275cmp=T({type:t,selectors:[["app-register"]],standalone:!0,features:[O([C,w]),x],decls:73,vars:50,consts:[[1,"modal-wrapper"],["color","light"],["slot","start"],["slot","end",1,"ion-no-padding"],["fill","clear",3,"click"],["name","close-outline",1,"icon-medium"],[3,"ngSubmit","formGroup"],["size","6"],["lines","none",1,"custom-item"],["formControlName","firstName","label","First Name","labelPlacement","floating","placeholder","Enter your first name",1,"label-texts",3,"clearOnEdit"],["color","danger",1,"error-message"],["formControlName","lastName","label","Last Name","labelPlacement","floating","placeholder","Enter your last name",1,"label-texts",3,"clearOnEdit"],["formControlName","username","label","Email","labelPlacement","stacked","placeholder","Enter your email",1,"label-texts",3,"clearOnEdit"],["formControlName","employeeId","label","Employee ID","labelPlacement","floating","placeholder","Enter your employee ID",1,"label-texts",3,"clearOnEdit"],["formControlName","password","label","Password","labelPlacement","floating","placeholder","Enter your password",1,"label-texts",3,"clearOnEdit"],["formControlName","confirmPassword","label","Confirm Password","labelPlacement","floating","placeholder","Enter your password again",1,"label-texts",3,"clearOnEdit"],["color","danger"],["lines","none",1,"stack-dropdown","custom-item"],["position","stacked",1,"label-texts"],["interface","popover","multiple","true","formControlName","projectName","placeholder","Select Project",1,"label-texts"],["class","label-texts",3,"value",4,"ngFor","ngForOf"],["formControlName","techstack","interface","popover","placeholder","Select Tech Stack",1,"label-texts"],["value","Frontend"],["value","Backend"],["value","FullStack"],["value","Testing"],["size","12"],["readonly","","label","Role","labelPlacement","floating","formControlName","role","type","text",1,"label-texts"],["slot","end",1,"ion-no-paddings"],[1,"close",3,"click"],[1,"save",3,"click"],[1,"label-texts",3,"value"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2)(4,"b"),l(5),o()(),n(6,"ion-buttons",3)(7,"ion-button",4),_("click",function(){return e.setOpen(!1)}),h(8,"ion-icon",5),o()()()(),n(9,"ion-content")(10,"form",6),_("ngSubmit",function(){return e.onSubmit()}),n(11,"ion-grid")(12,"ion-row")(13,"ion-col",7)(14,"ion-item",8),h(15,"ion-input",9),o(),p(16,be,3,0,"ion-text",10),o(),n(17,"ion-col",7)(18,"ion-item",8),h(19,"ion-input",11),o(),p(20,Ie,3,0,"ion-text",10),o()(),n(21,"ion-row")(22,"ion-col",7)(23,"ion-item",8),h(24,"ion-input",12),o(),p(25,we,3,2,"ion-text",10),o(),n(26,"ion-col",7)(27,"ion-item",8),h(28,"ion-input",13),o(),p(29,Pe,3,0,"ion-text",10),o()(),n(30,"ion-row")(31,"ion-col",7)(32,"ion-item",8),h(33,"ion-input",14),o(),p(34,Re,3,2,"ion-text",10),o(),n(35,"ion-col",7)(36,"ion-item",8),h(37,"ion-input",15),o(),p(38,Te,3,0,"ion-text",10)(39,ke,3,0,"ion-text",16),o()(),n(40,"ion-row")(41,"ion-col",7)(42,"ion-item",17)(43,"ion-label",18),l(44,"Projects"),o(),n(45,"ion-select",19),p(46,Oe,2,2,"ion-select-option",20),o()(),p(47,xe,3,0,"ion-text",10),o(),n(48,"ion-col",7)(49,"ion-item",17)(50,"ion-label",18),l(51,"Tech Stack"),o(),n(52,"ion-select",21)(53,"ion-select-option",22),l(54,"Frontend"),o(),n(55,"ion-select-option",23),l(56,"Backend"),o(),n(57,"ion-select-option",24),l(58,"Full Stack"),o(),n(59,"ion-select-option",25),l(60,"Testing"),o()()(),p(61,je,3,0,"ion-text",10),o()(),n(62,"ion-row")(63,"ion-col",26)(64,"ion-item",8),h(65,"ion-input",27),o()()()()()(),n(66,"ion-footer")(67,"ion-toolbar")(68,"ion-buttons",28)(69,"ion-button",29),_("click",function(){return e.setOpen(!1)}),l(70,"Close"),o(),n(71,"ion-button",30),_("click",function(){return e.onSubmit()}),l(72,"Save"),o()()()()()),r&2){let g;a(5),E("Create ",e.role,""),a(5),v("formGroup",e.registrationForm),a(4),f("invalid",e.validationService.isInvalid("firstName",e.registrationForm))("valid",e.validationService.isValid("firstName",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(16,e.validationService.isInvalid("firstName",e.registrationForm)?16:-1),a(2),f("invalid",e.validationService.isInvalid("lastName",e.registrationForm))("valid",e.validationService.isValid("lastName",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(20,e.validationService.isInvalid("lastName",e.registrationForm)?20:-1),a(3),f("invalid",e.validationService.isInvalid("username",e.registrationForm))("valid",e.validationService.isValid("username",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(25,e.validationService.isInvalid("lastName",e.registrationForm)?25:-1),a(2),f("invalid",e.validationService.isInvalid("employeeId",e.registrationForm))("valid",e.validationService.isValid("employeeId",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(29,e.validationService.isInvalid("employeeId",e.registrationForm)?29:-1),a(3),f("invalid",e.validationService.isInvalid("password",e.registrationForm))("valid",e.validationService.isValid("password",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(34,e.validationService.isInvalid("password",e.registrationForm)?34:-1),a(2),f("invalid",e.validationService.isInvalid("confirmPassword",e.registrationForm))("valid",e.validationService.isValid("confirmPassword",e.registrationForm)),a(),v("clearOnEdit",!0),a(),d(38,e.validationService.isInvalid("confirmPassword",e.registrationForm)?38:-1),a(),d(39,e.registrationForm.errors!=null&&e.registrationForm.errors.passwordMismatch&&((g=e.registrationForm.get("confirmPassword"))!=null&&g.touched)?39:-1),a(3),f("invalid",e.validationService.isInvalid("projectName",e.registrationForm))("valid",e.validationService.isValid("projectName",e.registrationForm)),a(4),v("ngForOf",e.projects),a(),d(47,e.validationService.isInvalid("projectName",e.registrationForm)?47:-1),a(2),f("invalid",e.validationService.isInvalid("techstack",e.registrationForm))("valid",e.validationService.isValid("techstack",e.registrationForm)),a(12),d(61,e.validationService.isInvalid("techstack",e.registrationForm)?61:-1)}},dependencies:[fe,Y,Z,ee,te,ie,oe,ne,re,ae,le,se,me,de,ce,pe,ue,ge,W,X,M,j,z,A,L,D,U,B],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:80%}ion-content[_ngcontent-%COMP%]{flex:1;--padding-bottom: 0;--margin-bottom: 0}ion-grid[_ngcontent-%COMP%]{margin-top:15px}.ion-no-padding[_ngcontent-%COMP%]{margin-right:11px}.ion-no-paddings[_ngcontent-%COMP%]{margin-right:18px;gap:16px}.ion-content[_ngcontent-%COMP%]{margin-bottom:4px}ion-item.invalid[_ngcontent-%COMP%]{--background: #f3b7b7}ion-item.valid[_ngcontent-%COMP%]{--background: #f3f4f6}"]})}}return t})();export{C as a,lt as b};
