import{P as S}from"./chunk-N46ENOW6.js";import{k as n,v as I}from"./chunk-ETXJNP3A.js";import{J as f,U as l,_ as s,da as h,ea as o,f as u}from"./chunk-45DPJSY7.js";var d=(()=>{class t{constructor(){this.totalSubject=new u,this.toast$=this.totalSubject.asObservable()}show(e,r){this.totalSubject.next({type:e,text:r})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var i={production:!1,apiUrls:"https://emp-tcb1.onrender.com/"};var c={REGISTRATION_DETAILS:i.apiUrls+"register",PROJect_DETAILS:i.apiUrls+"projects",TEAMS_DETAILS:i.apiUrls+"teamslist",LOGIN_DETAILS:"auth/login",POST_MANAGER_DETAILS:"api/managers",CREATE_ACCOUNT:"Account"};var T=(()=>{class t{constructor(){this.http=o(n),this.userList=[]}loginCheck(e){return this.http.get(c.REGISTRATION_DETAILS)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var j=(()=>{class t{constructor(){this.http=o(n),this.url=i.apiUrls}getData(e){return this.http.get(this.url+e)}postData(e,r){return this.http.post(this.url+e,r)}patchData(e,r){return this.http.put(this.url+e,r)}deleteData(e){return this.http.delete(this.url+e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var E={loading:!1,error:null,user:null},z=(()=>{class t extends S{constructor(e,r){super(E),this.auth=e,this.router=r,this.toast=o(d),this.sharedservice=o(j),this.login=this.effect(p=>p.pipe(f(g=>this.sharedservice.postData(c.LOGIN_DETAILS,g).pipe(l(a=>{a?(this.patchState({user:a}),localStorage.setItem("user",JSON.stringify(a.data)),console.log(localStorage.setItem("token",a.data.acessToken)),this.router.navigate(["/home"]),this.toast.show("success","Login successfully!")):this.toast.show("error","Invalid username or password.")}),l(()=>this.patchState({loading:!1})))))),this.user$=this.select(p=>p.user),this.clearAll=this.updater(()=>E)}static{this.\u0275fac=function(r){return new(r||t)(h(T),h(I))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{d as a,j as b,c,T as d,z as e};
