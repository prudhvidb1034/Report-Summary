import{a as f,b as m,c as s}from"./chunk-IPEDQWQT.js";import{P as d,Q as n}from"./chunk-LCAD2BME.js";import{k as u}from"./chunk-X2ZI6WJC.js";import{J as o,S as p,U as c,Ua as l,_ as h,ea as r}from"./chunk-6BICWZAS.js";var S=(()=>{class a{constructor(){this.http=r(u)}PostData(t,e){return this.http.post(t,e)}GetData(t){return this.http.get(t)}deleteData(t){return this.http.delete(t)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var I=(()=>{class a extends d{constructor(){super({teamDetails:[],loading:!1,error:""}),this._accountCreateStatus=l(null),this.toast=r(f),this.accountCreateStatus=this._accountCreateStatus.asReadonly(),this.teamListService=r(S),this.sharedservice=r(m),this.team$=this.select(t=>t.teamDetails),this.addTeam=this.effect(t=>t.pipe(o(e=>(this.patchState({loading:!0,error:null}),this.sharedservice.postData(s.CREATE_PROJECT,e).pipe(c({next:i=>{this.patchState({teamDetails:[i],loading:!1}),this._accountCreateStatus.set("success")},error:()=>{this.patchState({loading:!1,error:""}),this._accountCreateStatus.set("error")}})))))),this.getTeam=this.effect(t=>t.pipe(c(()=>this.patchState({loading:!0,error:null})),p(()=>this.sharedservice.getData(s.CREATE_PROJECT).pipe(n(e=>{this.patchState({teamDetails:e.data,loading:!1})},e=>{this.patchState({loading:!1,error:"Failed to fetch accounts"})}))))),this.updateProject=this.effect(t=>t.pipe(o(({id:e,data:i})=>(this.patchState({loading:!0,error:null}),this.sharedservice.patchData(`${s.CREATE_PROJECT}/${e}`,i).pipe(c({next:g=>{this._accountCreateStatus.set("update"),this.patchState({loading:!1})},error:()=>{this._accountCreateStatus.set("error"),this.patchState({loading:!1,error:"Failed to update account"}),this.toast.show("error","Update failed!")}})))))),this.deleteProject=this.effect(t=>t.pipe(o(e=>(this.patchState({loading:!0,error:null}),this.sharedservice.deleteData(`${s.CREATE_PROJECT}/${e}`).pipe(n(()=>{this.patchState({loading:!1}),this._accountCreateStatus.set("deleted"),this.getTeam(),this.toast.show("success","Account deleted successfully!")},i=>{this.patchState({loading:!1,error:""}),this._accountCreateStatus.set("error")}))))))}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=h({token:a,factory:a.\u0275fac})}}return a})();export{I as a};
